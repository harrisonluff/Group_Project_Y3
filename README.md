# Group_Project_Y3

This repo contains the raw data, cleaned data, reusable code, and notebooks for our group project. 

## Folder Structure:
├── raw/ # Raw CSVs (read-only once added)

├── cleaned/ # Cleaned/processed datasets

├── src/ # Reusable Python code (helpers, cleaning functions, etc.)

├── notebooks/ # Working notebooks

│ └── cleaning/ # Notebooks generating cleaned datasets

│ └── analysis/ # Individual analysis notebooks (regressions, tests etc.) - work in these for now.

│ └── final/ # Consolidated “final” notebooks for submission

├── outputs/ # Working outputs (not committed)

│ └── final/ # Consolidated “final” outputs for submission (committed)

├── README.md

└── .gitignore

## Where To Put Files:

### 'raw/' (raw data)
- Put original data here, ideally in folder named by source/use
- **Do not edit or overwrite files in 'raw/' once committed.**
- If something needs changing, add a new file with a new name, e.g. 'dataset_v2.csv'

### 'cleaned/' (cleaned data)
- Cleaned data goes here.
- These are **generated by cleaning notebooks/scripts** and are committed for reproducibility.
- Do not manually edit cleaned data - edit the notebook/code that generates them.
- **If it will change significantly - save under a new file, e.g. '_v2'.**
- **If different cleaned versions of same raw data, e.g. clusters generated by different strength param, indicate parameter(s) used in the filename in some way.**

### 'src/' (reusable code)
- Put shared functions here (cleaning helpers, regression helpers, plotting utilities) (may not use this much)

### 'notebooks/' (working notebooks)
- Put all notebooks here.
- Ideally, each notebook will be assigned to one person / everyone works in their own notebooks - helps avoid merge conflicts.
- Notebooks should run top-to-bottom without manual steps - i.e. before committing, restart kernel and run all to ensure it works.
- When working together / editing someone else's notebook:
  - **If you need to modify a notebook owned by someone else** Either
    1) message them and make change directly in their notebook, or
    2) duplicate the notebook under your prefix/name, and make the change there (preserving their original), or
    3) duplicate the notebook under shared name and work collaboratively in the new one (only one person can edit at a time). 
  - **Note:**
    1) Do **not** edit the same notebook at the same time, and
    2) (especially for (c), i.e. collaborative notebooks): **clear all outputs before committing** to reduce merge conflicts, this is generally done under **kernel -> restart and clear output**.

### 'notebooks/cleaning'
- Notebooks for processing raw data to cleaned.
- Within cleaning, recommended naming:
  - '00_cleaning_<dataset_1>.ipynb'
  - '01_cleaning_<dataset_2>.ipynb'
  - etc.
- i.e. each index refers to a topic/dataset, if multiple files for that topic are needed can be extended to 00_00, 00_01 etc.

### 'notebooks/analysis'
- Notebooks for analysis (plots, regressions, tests, etc.)
- These are notebooks we should individually work on, to avoid merge conflicts.
- Analysis notebooks should tend to read from 'cleaned/' (not 'raw/') unless justified (e.g. boundary shapefile in raw)
- Within analysis, recommended naming:
  - '00_<notebook_name>.ipynb'
  - '01_<notebook_name>.ipynb'
  - etc.
- i.e. each index refers to a person, if multiple files for that person are needed can be extended to 00_00, 00_01 etc.
  - 00 - Sami
  - 01 - Max
  - 02 - Sophia
  - 03 - Harrison
  - 04 - Tarun
- If this gets too messy - may make individual folders for each of us.

### 'notebooks/final'
- Consolidated final analysis notebooks which run tests and outputs for submission.

### 'outputs/'
- Store figure outputs if needed (note: these are not committed - i.e. they will be local to you). Only use if output needed cannot be viewed within analysis notebook.

### 'outputs/final'
- Store outputs needed for final submission, from final notebooks. Files in this folder are committed. 

## Notebook Path/Import Rule:

VSCode tends to run notebooks from the notebook's folder, not the repo root, so imports like 'from src...' can fail unless the repo root is on 'sys.path'.

**Add this cell to the top of every notebook:**

```python
import sys
from pathlib import Path

p = Path.cwd().resolve()
repo_root = next((parent for parent in [p] + list(p.parents) if (parent / ".git").exists()), None)
if repo_root is None:
    raise RuntimeError("Repo root not found. Open the repo folder in VS Code.")

sys.path.insert(0, str(repo_root))
print("Repo root:", repo_root)
```

This relies on cloning the repo, such that .git/ folder exists at root. I think this should work but if not lmk.

After this code you can safely run: from src.paths import ...

This also gives 'repo_root' which can be used for saving cleaned data/outputs, e.g. path for cleaned is '{str(repo_root)}/cleaned'

## Environment:
- Should not be an issue ideally, but if we do get any issues of code not running / running differently, let me know and can sort out an enivronment specification.

## Workflow:
- main = stable version
- dev = day-to-day work branch
- We will work on dev, and I will merge to main every so often. Working on dev means we don't have potential to mess up main branch if anything goes wrong.

**Note:**
- Always pull 'dev' **before starting work**, i.e. before opening/running notebooks (in order to get any updates, and not work on out of date branch).
- Push to 'dev' (do not push to 'main'!). Use a short descriptive commit mesages (e.g. "Add regression for X", not "update"). 
- If you make changes that might affect others (e.g. shared code, new version of cleaned data), notify the group.
- If VS Code offers to enable auto-sync (auto-fetch/pull) - click **yes**. This helps prevent working on out of date dev branch. This does not automatically push your changes, you still choose when to commit and push.
- The first time you commit code it should ask to add your email and username to Git. If so, use the private email address GitHub provides in your account rather than your own email, protects your email from being scraped from GitHub.

## Setup:
1) Create a GitHub account, and share username with group so you can be added to repo. (Note: if you want access post-uni use personal email)
2) Install Git (version control system used by GitHub). Default install options are fine.
3) Within VS Code:
  - Version control icon on left vertical toolbar 
  - Clone repository
  - Select folder to clone into on your system. Note, the repo will download into a folder called 'Group_Project_Y3/' inside the folder you select.
  - If needed, open the cloned folder in VS Code.
4) Within PyCharm:
  - I have no idea but I'm sure you can work it out Sami
5) Switch to dev branch:
  - After cloning make sure you are working on dev branch (not main).
  - In VS Code, click the branch name in bottom-left and select dev.
6) Sign up for GitHub education: https://github.com/settings/education/benefits (so I can make repo private and keep permissions -> this means we have less concerns about data privacy if we get approved for data).

**If there is a merge conflict, do not click buttons randomly. Tell the group which file has a conflict and we can resolve together. Ideally, as long as no one is working on the same notebook at the same time, we should be okay.**
